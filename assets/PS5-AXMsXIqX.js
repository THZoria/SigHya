import{j as e,m,A as y}from"./framer-motion-DORXFKSY.js";import{e as q,a as c,d as O}from"./react-vendor-n8-9m1E7.js";import{P as U}from"./PageTransition-CYfK23sm.js";import{u as H,S as J}from"./index-PykM2RrW.js";import{T as G,g as K,A as $,j as W,b as X,I as Y,k as z,l as B,d as V,m as Z}from"./lucide-icons-BL5jV39b.js";const j=5,ae=()=>{const{t:l}=H(),[p,R]=q(),[h,N]=c.useState([]),[b,k]=c.useState([]),[g,w]=c.useState(""),[v,C]=c.useState(!0),[L,T]=c.useState(null),[S,A]=c.useState(!0),E="ps5-error-codes",D=7*24*60*60*1e3,f=c.useRef(),x=c.useCallback((s,t=h)=>{const r=t.filter(o=>o.ID.toLowerCase().includes(s.toLowerCase())||o.Message.toLowerCase().includes(s.toLowerCase()));k(r)},[h]),d=p.get("q")||"",a=parseInt(p.get("page")||"1",10),P=(s,t)=>{const r=new URLSearchParams(p);s&&r.set("q",s),t>1&&r.set("page",t.toString()),R(r,{replace:!0})};c.useEffect(()=>{d!==g&&(w(d),h.length>0&&x(d))},[d,h,x]);const n=Math.ceil(b.length/j),I=b.slice((a-1)*j,a*j);c.useEffect(()=>{const s=async()=>{const t=localStorage.getItem(E);if(t)try{const{data:r,timestamp:o}=JSON.parse(t);if(Date.now()-o<D){N(r.PlayStation5.ErrorCodes),C(!1),x(d,r.PlayStation5.ErrorCodes);return}}catch(r){console.error("Error parsing cached data:",r)}try{const r=await fetch("https://raw.githubusercontent.com/amoamare/Console-Service-Tool/master/Resources/ErrorCodes.json"),o=await r.json();if(!r.ok)throw new Error("Failed to fetch error codes");if(o?.PlayStation5?.ErrorCodes){const i=Date.now();localStorage.setItem(E,JSON.stringify({data:o,timestamp:i})),N(o.PlayStation5.ErrorCodes),x(d,o.PlayStation5.ErrorCodes)}else throw new Error("Invalid data structure")}catch(r){console.error("Error fetching error codes:",r),T(l("ps5.results.fetchError"))}finally{C(!1)}};S&&(A(!1),s())},[S,d,x]);const _=s=>{w(s),x(s),f.current&&window.clearTimeout(f.current),f.current=window.setTimeout(()=>{P(s,1)},500)},u=s=>{s<1||s>n||P(g,s)},F=c.useMemo(()=>{const t=[],r=[];let o;for(let i=1;i<=n;i++)(i===1||i===n||i>=a-2&&i<=a+2)&&t.push(i);for(const i of t)o&&(i-o===2?r.push(o+1):i-o!==1&&r.push("...")),r.push(i),o=i;return r},[a,n]),M=(s,t)=>{const r={3:{bg:"bg-red-500/10",border:"border-red-500/20",text:"text-red-400",label:"critical"},2:{bg:"bg-orange-500/10",border:"border-orange-500/20",text:"text-orange-400",label:"high"},1:{bg:"bg-yellow-500/10",border:"border-yellow-500/20",text:"text-yellow-400",label:"medium"},0:{bg:"bg-blue-500/10",border:"border-blue-500/20",text:"text-blue-400",label:"low"}};return r[t]||r[0]};return e.jsx(U,{children:e.jsxs("div",{className:"min-h-screen pt-32 pb-16 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-[0.03]"}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-blue-400 to-blue-600 text-transparent bg-clip-text mb-4",children:l("ps5.title")}),e.jsx("p",{className:"text-xl text-blue-200/80",children:l("ps5.subtitle")})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-gray-800/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-blue-500/20 mb-8",children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx(G,{className:"w-6 h-6 text-blue-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:l("ps5.search.title")}),e.jsx("p",{className:"text-gray-300",children:l("ps5.search.description")})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:g,onChange:s=>_(s.target.value),placeholder:l("ps5.search.placeholder"),className:"w-full px-5 py-4 bg-gray-900/50 border-2 border-blue-500/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all","aria-label":l("ps5.search.placeholder"),"aria-describedby":"ps5-search-description"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none","aria-hidden":"true",children:e.jsx(K,{className:"w-5 h-5 text-blue-400"})})]})]}),e.jsx(y,{children:L&&e.jsx(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 mb-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx($,{className:"w-5 h-5 text-red-400"}),e.jsx("p",{className:"text-red-400",children:l("ps5.results.error")})]})})}),e.jsx(y,{children:v&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:Array.from({length:3}).map((s,t)=>e.jsx(J,{className:"bg-gray-800/80 backdrop-blur-sm"},t))})}),!v&&d&&e.jsxs(m.div,{initial:!1,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"text-gray-300",children:[b.length," ",l(`ps5.results.${b.length===1?"found":"found_plural"}`)]}),n>1&&e.jsxs("div",{className:"text-gray-400 text-sm",children:[l("ps5.results.page")," ",a," ",l("ps5.results.of")," ",n]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(y,{mode:"wait",children:I.length>0?I.map(s=>{const t=M(s.Status,s.Priority);return e.jsx("div",{className:`bg-gray-800/80 backdrop-blur-sm rounded-xl p-6 border ${t.border} hover:scale-[1.01] transition-transform duration-200`,role:"article","aria-labelledby":`error-${s.ID}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t.bg}`,"aria-hidden":"true",children:s.Priority===3?e.jsx(W,{className:t.text}):s.Priority===2?e.jsx($,{className:t.text}):s.Priority===1?e.jsx(X,{className:t.text}):e.jsx(Y,{className:t.text})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{id:`error-${s.ID}`,className:"text-xl font-semibold text-white mb-2",children:s.ID}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${t.bg} ${t.text}`,"aria-label":`${l("ps5.results.priorityLabel")}: ${l(`ps5.results.priority.${t.label.toLowerCase()}`)}`,children:l(`ps5.results.priority.${t.label.toLowerCase()}`)})]}),e.jsx("p",{className:"text-gray-300",children:s.Message})]})]})},s.ID)}):e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400",children:l("ps5.results.noResults").replace("{query}",d)})})})}),n>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("nav",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>u(1),disabled:a===1,className:`p-2 rounded-lg transition-all duration-300 ${a===1?"opacity-50 cursor-not-allowed":"hover:bg-blue-500/20"}`,children:e.jsx(z,{className:"w-5 h-5 text-blue-400"})}),e.jsx("button",{onClick:()=>u(a-1),disabled:a===1,className:`p-2 rounded-lg transition-all duration-300 ${a===1?"opacity-50 cursor-not-allowed":"hover:bg-blue-500/20"}`,children:e.jsx(B,{className:"w-5 h-5 text-blue-400"})}),e.jsx("div",{className:"flex items-center space-x-1",children:F.map((s,t)=>e.jsx(O.Fragment,{children:s==="..."?e.jsx("span",{className:"px-2 text-gray-500",children:"•••"}):e.jsx("button",{onClick:()=>u(s),className:`w-10 h-10 rounded-lg font-medium transition-all duration-300 ${a===s?"bg-blue-500 text-white":"text-blue-400 hover:bg-blue-500/20"}`,children:s})},t))}),e.jsx("button",{onClick:()=>u(a+1),disabled:a===n,className:`p-2 rounded-lg transition-all duration-300 ${a===n?"opacity-50 cursor-not-allowed":"hover:bg-blue-500/20"}`,children:e.jsx(V,{className:"w-5 h-5 text-blue-400"})}),e.jsx("button",{onClick:()=>u(n),disabled:a===n,className:`p-2 rounded-lg transition-all duration-300 ${a===n?"opacity-50 cursor-not-allowed":"hover:bg-blue-500/20"}`,children:e.jsx(Z,{className:"w-5 h-5 text-blue-400"})})]})})]})]})]})})};export{ae as default};
